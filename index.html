<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Můj první dashboard</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
 <h1>Můj první dashboard</h1>

  <!-- FILTR -->
  <label for="yearSelect">Rok:</label>
  <select id="yearSelect">
    <option value="2023">2023</option>
    <option value="2024" selected>2024</option>
  </select>

  <br><br>

  <!-- KONTEJNER GRAFŮ -->
  <div class="charts">
    <div class="chart-box">
      <canvas id="barChart"></canvas>
    </div>

    <div class="chart-box">
      <canvas id="lineChart"></canvas>
    </div>
  </div>

  <!-- SCRIPT ZŮSTÁVÁ STEJNÝ -->

  <script>
  let dataByYear = {};

  fetch("data.json")
    .then(response => response.json())
    .then(data => {
      dataByYear = data;
      initCharts();
    });

  function initCharts() {
    const categoryLabels = ["Kategorie A", "Kategorie B", "Kategorie C"];
    const monthLabels = ["Q1", "Q2", "Q3", "Q4"];

    const barChart = new Chart(
      document.getElementById("barChart"),
      {
        type: "bar",
        data: {
          labels: categoryLabels,
          datasets: [{
            label: "Hodnota podle kategorií",
            data: dataByYear["2024"].categories
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false
        }
      }
    );

    const lineChart = new Chart(
      document.getElementById("lineChart"),
      {
        type: "line",
        data: {
          labels: monthLabels,
          datasets: [{
            label: "Trend v čase",
            data: dataByYear["2024"].trend
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false
        }
      }
    );

    document.getElementById("yearSelect").addEventListener("change", function () {
      const selectedYear = this.value;

      barChart.data.datasets[0].data =
        dataByYear[selectedYear].categories;

      lineChart.data.datasets[0].data =
        dataByYear[selectedYear].trend;

      barChart.update();
      lineChart.update();
    });
  }
</script>

</body>
</html>
